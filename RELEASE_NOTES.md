### 版本 V40.4 更新說明 | Release Notes for Version V40.4

**版本標題：** `帳單知識庫擴充與權限修正 (Billing Knowledge & Permissions Fix)`

此版本為一個重要的穩定性更新，主要針對 PDF 繳費單的辨識能力進行了強化，並從根本上解決了因權限不足導致的執行錯誤問題。

---

#### ✨ 主要功能與修正 / Major Features & Fixes

* **[AI 強化] 擴充帳單知識庫:**
    * 大幅強化了 `callGeminiForPdfText` 的 AI 指令，新增了處理「繳費證明單」的規則與範例。
    * AI 現在能夠理解「學校名稱」、「繳款金額」等非零售收據的欄位，並將其正確歸類為「育」等類別，提升了對多樣化文件格式的處理能力。

* **[修正] 修正授權問題:**
    * 修正了在特定操作（如從照片圖庫選取圖片、背景執行資料夾檢查）時，會因權限不足而導致執行失敗的嚴重錯誤。
    * 更新了專案的權限宣告檔 (`appsscript.json`)，確保系統在首次授權時，能一次性請求所有必要權限。

#### 🚀 改善 / Improvements

* **穩定性:** 徹底解決了因權限不足導致的 `需要授權` 或 `Authorization is required` 錯誤。
* **辨識能力:** 提升了對 PDF 格式帳單、繳費單的辨識準確率。

#### ⚠️ 重大變更 / Breaking Changes

* **[必要操作] 重新授權:** 所有從舊版本更新的使用者，在更新程式碼後，**可能需要重新對專案進行授權**。建議在儲存新程式碼後，手動執行一次 `testDriveAuthorization` 函式，以觸發最完整的授權流程，確保所有功能都能正常運作。
