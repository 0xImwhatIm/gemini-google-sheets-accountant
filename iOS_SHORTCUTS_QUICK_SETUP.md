# iOS 捷徑快速設定指南

## 🚀 5分鐘快速設定

### 準備工作
1. 獲取您的 Google Apps Script 部署 URL
2. 確保 iPhone 已安裝「捷徑」應用

---

## 📱 情境一：語音記帳（最簡單）

### 捷徑動作順序：
1. **聽寫文字** 
   - 提示：「請說出交易內容」
   - 語言：繁體中文

2. **編碼 URL**
   - 輸入：聽寫的文字

3. **文字**
   - 內容：`https://script.google.com/macros/s/YOUR_ID/exec?endpoint=voice&text=編碼的URL`

4. **取得 URL 內容**
   - URL：文字
   - 方法：GET

5. **顯示通知**
   - 標題：記帳完成
   - 內容：URL 的內容

### 🎯 使用方式：
說「我買了咖啡花150元」→ 自動記帳完成

---

## 📷 情境二：拍照記帳

### 捷徑動作順序：
1. **拍照**

2. **編碼為 Base64**
   - 輸入：照片

3. **取得字典的值**
   - 字典內容：
     ```json
     {
       "image": "Base64編碼",
       "filename": "receipt.jpg"
     }
     ```

4. **取得 URL 內容**
   - URL：`https://script.google.com/macros/s/YOUR_ID/exec?endpoint=image`
   - 方法：POST
   - 請求內文：字典
   - 標頭：`Content-Type: application/json`

5. **顯示通知**
   - 標題：拍照記帳完成
   - 內容：URL 的內容

### 🎯 使用方式：
拍攝收據 → AI 自動解析 → 記帳完成

---

## 📷🎤 情境三：拍照＋語音記帳

### 捷徑動作順序：
1. **拍照**

2. **聽寫文字**
   - 提示：「請說出補充說明」

3. **編碼為 Base64**
   - 輸入：照片

4. **取得字典的值**
   - 字典內容：
     ```json
     {
       "image": "Base64編碼",
       "filename": "receipt.jpg",
       "voiceNote": "聽寫的文字"
     }
     ```

5. **取得 URL 內容**
   - URL：`https://script.google.com/macros/s/YOUR_ID/exec?endpoint=image`
   - 方法：POST
   - 請求內文：字典
   - 標頭：`Content-Type: application/json`

6. **顯示通知**
   - 標題：組合記帳完成
   - 內容：URL 的內容

### 🎯 使用方式：
拍攝收據 → 說明用途 → AI 綜合分析 → 記帳完成

---

## ⚡ 快速測試

### 測試語音記帳：
說：「我今天買了一杯咖啡花了150元」

### 測試拍照記帳：
拍攝任何收據或發票

### 測試組合記帳：
拍攝收據 + 說：「這是公司聚餐費用」

---

## 🔧 常見問題 1分鐘解決

### ❌ 語音識別失敗
- 確保安靜環境
- 說話清晰
- 重新錄製

### ❌ 拍照處理失敗  
- 確保照片清晰
- 光線充足
- 檢查網路

### ❌ API 錯誤
- 檢查 URL 中的 ID 是否正確
- 確認 Google Apps Script 已部署

### ❌ 捷徑中斷
- 檢查每個動作的輸入來源
- 確認網路連接穩定

---

## 🎯 進階技巧

### 添加到主畫面：
捷徑設定 → 加入到主畫面

### 設定 Siri 啟動：
捷徑設定 → 加入到 Siri → 錄製「開始記帳」

### 添加錯誤處理：
在「取得 URL 內容」後加入「If」判斷是否包含「error」

---

## 📞 需要幫助？

1. **檢查 URL 格式**：確保包含正確的部署 ID
2. **測試網路**：確保能正常訪問 Google 服務  
3. **查看回應**：在最後加入「快速查看」動作查看詳細回應
4. **重新部署**：如果持續失敗，嘗試重新部署 Google Apps Script

---

## 🎉 完成！

現在您已經擁有三個強大的記帳捷徑：
- 🎤 語音記帳：最快速
- 📷 拍照記帳：最準確  
- 📷🎤 組合記帳：最完整

享受智慧記帳的便利吧！